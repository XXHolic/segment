# 94.JavaScript WebGL 设置颜色.111
## <a name="index"></a> 目录
- [引子](#start)
- [顶点坐标范围为什么要在 1.0 到 1.0 之间 ？](#ques1)
- [参考资料](#reference)

## <a name="start"></a> 引子
[JavaScript WebGL 绘制一个面][url-pre]之后想着可以尝试复杂一点的了，没想到设置颜色的时候又出现问题了。

## <a name="ques1"></a> 设置颜色
在之前的示例中，都是设置单一的颜色，但每个顶点都可以拥有各自的颜色信息。

基于[绘制三角形]主要有下面几方面变化。

### 顶点着色器
之前都是只提供了位置变量，对于颜色需要提供额外的颜色变量进行存储。此外还需要输出对应的颜色到下一个阶段。
```js
  const source = `
    attribute vec3 vertexPos;
    attribute vec4 vertexColor;

    varying vec4 vColor;
    void main(void){
      gl_Position = vec4(vertexPos, 1);
      vColor = vertexColor;
    }
  `;
```
这里面多了一个 `varying` 类型的变量，这是一种顶点着色器给片断着色器传值的方式。

### 片段着色器
片段着色器接受对应的变量也要进行声明。
```js
  const fragmentSource = `
    precision highp float;
    varying vec4 vColor;
    void main(void){
      gl_FragColor = vColor;
    }
  `;
```
这里出现了变量，需要用 `precision highp float;` 设置片段着色器的浮点数精度。顶点着色器有默认的精度可以不用显式设置。

### 缓冲颜色数据

<div align="right"><a href="#index">Back to top :arrow_up:</a></div>


## <a name="reference"></a> 参考资料
- [使用着色器 MDN][url-3]
- [WebGL lessons][url-1]
- [着色器][url-2]
- [WebGL基础绘制之三：给物体上色][url-4]

[url-pre]:https://github.com/XXHolic/segment/issues/111
[url-1]:https://webglfundamentals.org/
[url-2]:https://learnopengl-cn.github.io/01%20Getting%20started/05%20Shaders/
[url-3]:https://developer.mozilla.org/zh-CN/docs/Web/API/WebGL_API/Tutorial/Using_shaders_to_apply_color_in_WebGL
[url-4]:http://www.jiazhengblog.com/blog/2016/02/22/2923/

[url-5]:https://webglfundamentals.org/
[url-6]:https://xxholic.github.io/lab/segment/93/use-program.html
[url-7]:https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/useProgram

[url-local-1]:../images/93/1.png

<details>
<summary>:wastebasket:</summary>


</details>

