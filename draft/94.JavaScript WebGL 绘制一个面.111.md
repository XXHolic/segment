# 94.JavaScript WebGL 绘制一个面.111
## <a name="index"></a> 目录
- [引子](#start)
- [顶点坐标范围为什么要在 1.0 到 1.0 之间 ？](#ques1)

- [参考资料](#reference)

## <a name="start"></a> 引子
[JavaScript WebGL 基础疑惑点][url-pre]之后进行了一些优化，然后尝试绘制最常见二维的面。

WebGL 中几何体最终都是由三角形构成，由三角形切入比较合适。

## <a name="triangle"></a> 绘制一个三角形
这是[示例][]，基于 [JavaScript WebGL 绘制一条直线][url-5]主要的变化有：

### 顶点
三角形有三个顶点，在 [JavaScript WebGL 基础疑惑点][url-pre]中坐标系是右手坐标系，个人习惯描述顶点的顺序以图形中心为原点，从第一象限到第四象限。
```js
  let vertices = [
    0.5, 0.5, 0.0, // 第一象限
    -0.5, 0.5, 0.0, // 第二象限
    -0.5, -0.5, 0.0, // 第三象限
  ]; // 三角形
```

### 绘制图元
这次绘制的是一个面，[drawArrays][url-6] 中图元变为 `gl.TRIANGLES` 。
## <a name="triangle"></a> 高清处理
上面的示例，在高清屏幕中会出现明显的模糊和锯齿，但跟处理 `2d` 上下文的模糊又有些不一样。最主要的一个区别是 WebGL 中需要用 [viewport][url-8] 方法指定从标准设备到窗口坐标的映射变换。详细可以见这篇[文章][url-7]里面的解释。

```js
  function WebGLHD(w = 300, h = 150) {
    const ratio = window.devicePixelRatio || 1;
    const canvas = document.createElement("canvas");
    const context = canvas.getContext("webgl");
    // 高清屏幕模糊问题处理
    canvas.width = w * ratio; // 实际渲染像素
    canvas.height = h * ratio; // 实际渲染像素
    canvas.style.width = `${w}px`; // 控制显示大小
    canvas.style.height = `${h}px`; // 控制显示大小
    context.viewport(0, 0, context.canvas.width, context.canvas.height);
  }
```

<div align="right"><a href="#index">Back to top :arrow_up:</a></div>


## <a name="reference"></a> 参考资料
- [WebGL基础绘制之二：绘制三角形][url-4]
- [WebGL lessons][url-2]
- [你好，三角形][url-3]
- [WebGL 1.0 官方索引卡片][url-1]

[url-pre]:https://github.com/XXHolic/segment/issues/110
[url-1]:https://www.khronos.org/files/webgl/webgl-reference-card-1_0.pdf
[url-2]:https://webglfundamentals.org/
[url-3]:https://learnopengl-cn.github.io/01%20Getting%20started/04%20Hello%20Triangle/
[url-4]:http://www.jiazhengblog.com/blog/2016/02/19/2910/
[url-5]:https://github.com/XXHolic/segment/issues/109
[url-6]:https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/drawArrays
[url-7]:https://webglfundamentals.org/webgl/lessons/webgl-resizing-the-canvas.html
[url-8]:https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/viewport

[url-local-1]:../images/93/1.png

<details>
<summary>:wastebasket:</summary>


</details>

